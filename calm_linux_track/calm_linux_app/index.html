<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-calm_linux_track/calm_linux_app/calm_linux_app">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Linux Workloads | Continuous Integration Continuous Delivery on Nutanix Lab</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://github.com/cicd_lab/calm_linux_track/calm_linux_app/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Linux Workloads | Continuous Integration Continuous Delivery on Nutanix Lab"><meta data-rh="true" name="description" content="The estimated time to complete this lab is 60 minutes."><meta data-rh="true" property="og:description" content="The estimated time to complete this lab is 60 minutes."><link data-rh="true" rel="icon" href="/cicd_lab/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://github.com/cicd_lab/calm_linux_track/calm_linux_app/"><link data-rh="true" rel="alternate" href="https://github.com/cicd_lab/calm_linux_track/calm_linux_app/" hreflang="en"><link data-rh="true" rel="alternate" href="https://github.com/cicd_lab/calm_linux_track/calm_linux_app/" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/cicd_lab/blog/rss.xml" title="Continuous Integration Continuous Delivery on Nutanix Lab RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/cicd_lab/blog/atom.xml" title="Continuous Integration Continuous Delivery on Nutanix Lab Atom Feed"><link rel="stylesheet" href="/cicd_lab/assets/css/styles.31306478.css">
<link rel="preload" href="/cicd_lab/assets/js/runtime~main.4c4a6286.js" as="script">
<link rel="preload" href="/cicd_lab/assets/js/main.d3258577.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/cicd_lab/"><div class="navbar__logo"><img src="/cicd_lab/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/cicd_lab/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">CICD on Nutanix Lab</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_gTbr docMainContainerEnhanced_Uz_u"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Linux Workloads</h1></header><p><em>The estimated time to complete this lab is 60 minutes.</em></p><h1>Overview</h1><p>Nutanix Calm allows you to seamlessly select, provision, and manage your
business applications across your infrastructure for both the private
and public clouds. Nutanix Calm provides App lifecycle, monitoring and
remediation to manage your heterogeneous infrastructure, for example,
VMs or bare-metal servers. Nutanix Calm supports multiple platforms so
that you can use a single self-service and automation interface to
manage all your infrastructure.</p><p><strong>In this lab you will explore the basics of Nutanix Calm by building
and deploying a blueprint that installs and configures a multi-tier Task
Manager web app using MySQL, nginix, and HAProxy.</strong></p><h1>Creating a Blueprint</h1><p>A blueprint is the framework for every application that you model by
using Nutanix Calm. Blueprints are templates that describe all the steps
that are required to provision, configure, and execute tasks on the
services and applications that are created. You can create a blueprint
to represent the architecture of your application and then run the
blueprint repeatedly to create an instance, provision, and launch your
applications. A blueprint also defines the lifecycle of an application
and its underlying infrastructure starting from the creation of the
application to the actions that are carried out on a blueprint until the
termination of the application.</p><p>You can use blueprints to model the applications of various
complexities; from simply provisioning a single virtual machine to
provisioning and managing a multi-node, multi-tier application.</p><ol><li><p>In <strong>Prism Central</strong>, select <strong>Menu</strong> &gt; <strong>Services</strong> &gt; <strong>Calm</strong>.</p><p><img loading="lazy" src="/cicd_lab/assets/images/1-6a1f1eb28d512def67df5bd006e7e227.png" width="411" height="421" class="img_ev3q"></p></li><li><p>Select <img loading="lazy" alt="blueprints" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAXCAYAAAARIY8tAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADjSURBVEhL5ZI9CsJAEEa9sa2VYGljY2dhZ6OQ1kKwDyg5gD85gXqE0ReYJe4OS7JhC/GDj7BLZt7M7Iwks/4Y8Hi+5HKrnTlbSgKUp0rGk2lgQL6SAJtdYQIA++oFYAz7w1Fm80UewHK1dk4GaJVqgvQBqZw5DxqRFUjFSAEk4o5z29YmfQEItgAEI77WpsTUCdB2NsD1Xg/vgBlayf0R6SLw2M7bovnHV/DIQeDHuh0K4M4qxOouAMTE5mgBFqDTmsZEArqwkuPBAFW2DlSMKSuALSrPVZNQzRpbSgL00a8DRN6u49eHwD7U7AAAAABJRU5ErkJggg==" width="24" height="23" class="img_ev3q"> <strong>Blueprints</strong> in the left hand toolbar to view and manage Calm blueprints.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>Hovering the mouse over an icon will display its title.</p></div></div></li><li><p>Click <strong>+ Create Blueprint &gt; Multi VM/Pod Blueprint</strong></p></li><li><p>Fill out the following fields:</p><ul><li><strong>Name</strong> - <em>Initials</em>-CalmLinuxIntro</li><li><strong>Description</strong> - Task Manager Application</li><li><strong>Project</strong> - <em>Initials</em>-Calm</li></ul><p><img loading="lazy" src="/cicd_lab/assets/images/2-92a14fd7a16c81b560e974889cd26030.png" width="558" height="421" class="img_ev3q"></p></li><li><p>Click <strong>Proceed</strong> to launch the Blueprint Editor.</p><p>The Blueprint Editor provides a graphical representation of various
components that enable you to visualize and configure the components
and their dependencies in your environment.</p></li></ol><h1>Creating Credentials</h1><p>First you will create a credential that will be used to authenticate
Calm to the CentOS VMs you will eventually deploy. Credentials are
unique to each Blueprint, and are <strong>not</strong> exported as part of the
Blueprint for security purposes. Each Blueprint requires a minimum of 1
credential.</p><p>This exercise uses a \&quot;Generic Cloud\&quot; CentOS image. This is a common
option for multiple popular Linux distributions that is lightweight,
supports Cloud-Init based configuration, and utilizes <a href="https://www.ssh.com/ssh/public-key-authentication" target="_blank" rel="noopener noreferrer">SSH keypair authentication</a>
instead of passwords. Keypair based authentication is commonplace in all public cloud environments.</p><ol><li><p>Click <strong>Credentials</strong>.</p><p><img loading="lazy" src="data:image/png;base64,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" width="591" height="43" class="img_ev3q"></p></li><li><p>Click <strong>Credentials</strong> <code>plus-circle</code>{.interpreted-text role=&quot;fa&quot;} and
fill out the following fields:</p><ul><li><strong>Credential Name</strong> - CENTOS</li><li><strong>Username</strong> - centos</li><li><strong>Secret Type</strong> - SSH Private Key</li><li><strong>Key</strong> - Paste in your own private key, or use the following:</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-----BEGIN RSA PRIVATE KEY-----</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MIIEowIBAAKCAQEAii7qFDhVadLx5lULAG/ooCUTA/ATSmXbArs+GdHxbUWd/bNG</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ZCXnaQ2L1mSVVGDxfTbSaTJ3En3tVlMtD2RjZPdhqWESCaoj2kXLYSiNDS9qz3SK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">6h822je/f9O9CzCTrw2XGhnDVwmNraUvO5wmQObCDthTXc72PcBOd6oa4ENsnuY9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HtiETg29TZXgCYPFXipLBHSZYkBmGgccAeY9dq5ywiywBJLuoSovXkkRJk3cd7Gy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hCRIwYzqfdgSmiAMYgJLrz/UuLxatPqXts2D8v1xqR9EPNZNzgd4QHK4of1lqsNR</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uz2SxkwqLcXSw0mGcAL8mIwVpzhPzwmENC5OrwIBJQKCAQB++q2WCkCmbtByyrAp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">6ktiukjTL6MGGGhjX/PgYA5IvINX1SvtU0NZnb7FAntiSz7GFrODQyFPQ0jL3bq0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MrwzRDA6x+cPzMb/7RvBEIGdadfFjbAVaMqfAsul5SpBokKFLxU6lDb2CMdhS67c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1K2Hv0qKLpHL0vAdEZQ2nFAMWETvVMzl0o1dQmyGzA0GTY8VYdCRsUbwNgvFMvBj</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">8T/svzjpASDifa7IXlGaLrXfCH584zt7y+qjJ05O1G0NFslQ9n2wi7F93N8rHxgl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">JDE4OhfyaDyLL1UdBlBpjYPSUbX7D5NExLggWEVFEwx4JRaK6+aDdFDKbSBIidHf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">h45NAoGBANjANRKLBtcxmW4foK5ILTuFkOaowqj+2AIgT1ezCVpErHDFg0bkuvDk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">QVdsAJRX5//luSO30dI0OWWGjgmIUXD7iej0sjAPJjRAv8ai+MYyaLfkdqv1Oj5c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">oDC3KjmSdXTuWSYNvarsW+Uf2v7zlZlWesTnpV6gkZH3tX86iuiZAoGBAKM0mKX0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EjFkJH65Ym7gIED2CUyuFqq4WsCUD2RakpYZyIBKZGr8MRni3I4z6Hqm+rxVW6Dj</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uFGQe5GhgPvO23UG1Y6nm0VkYgZq81TraZc/oMzignSC95w7OsLaLn6qp32Fje1M</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Ez2Yn0T3dDcu1twY8OoDuvWx5LFMJ3NoRJaHAoGBAJ4rZP+xj17DVElxBo0EPK7k</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">7TKygDYhwDjnJSRSN0HfFg0agmQqXucjGuzEbyAkeN1Um9vLU+xrTHqEyIN/Jqxk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hztKxzfTtBhK7M84p7M5iq+0jfMau8ykdOVHZAB/odHeXLrnbrr/gVQsAKw1NdDC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kPCNXP/c9JrzB+c4juEVAoGBAJGPxmp/vTL4c5OebIxnCAKWP6VBUnyWliFhdYME</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rECvNkjoZ2ZWjKhijVw8Il+OAjlFNgwJXzP9Z0qJIAMuHa2QeUfhmFKlo4ku9LOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2rdUbNJpKD5m+IRsLX1az4W6zLwPVRHp56WjzFJEfGiRjzMBfOxkMSBSjbLjDm3Z</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">iUf7AoGBALjvtjapDwlEa5/CFvzOVGFq4L/OJTBEBGx/SA4HUc3TFTtlY2hvTDPZ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dQr/JBzLBUjCOBVuUuH3uW7hGhW+DnlzrfbfJATaRR8Ht6VU651T+Gbrr8EqNpCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gmznERCNf9Kaxl/hlyV5dZBe/2LIK+/jLGNu9EJLoraaCBFshJKF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-----END RSA PRIVATE KEY-----</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" src="/cicd_lab/assets/images/4-dcf11190368255d54349f466fc9d43d7.png" width="298" height="497" class="img_ev3q"></p></li><li><p>Click <strong>Save</strong>, and then <strong>Back</strong>.</p></li></ol><h1>Defining Variables</h1><p>Variables allow extensibility of Blueprints, meaning a single Blueprint
can be used for multiple purposes and environments depending on the
configuration of its variables. Variables can either be static values
saved as part of the Blueprint or they can be specified at <strong>Runtime</strong>
(when the Blueprint is launched). Variables are specific to a given
<strong>Application Profile</strong>, which is the platform on which the blueprint
will be deployed. For example, a blueprint capable of being deployed to
both AHV and AWS would have 2 Application Profiles. Each profile could
have individual variables and VM configurations.</p><p>By default, variables are stored as a <strong>String</strong> and are visible in the
Configuration Pane. Setting a variable as <strong>Secret</strong> will mask the value
and is ideal for variables such as passwords. In addition to the String
and Secret options, there are Integer, Multi-line String, Date, Time,
and Date Time <strong>Data Types</strong>, and more advanced <strong>Input Types</strong>, however
these are outside the scope of this lab.</p><p>Variables can be used in scripts executed against objects using the
<strong>@@{variable_name}@@</strong> construct. Calm will expand and replace the
variable with the appropriate value before sending to the VM.</p><ol><li><p>In the <strong>Configuration Pane</strong> on the right side of the Blueprint
Editor, under <strong>Variables</strong>, add the following variables
(<strong>Runtime</strong> is specified by toggling the <strong>Running Man</strong> icon to
Blue):</p><table><thead><tr><th>Variable Name</th><th>Data Type</th><th>VALUE</th><th align="center">SECRET</th><th align="center">RUNTIME</th></tr></thead><tbody><tr><td>User_initials</td><td>String</td><td>xyz</td><td align="center"></td><td align="center">X</td></tr><tr><td>Mysql_user</td><td>String</td><td>root</td><td align="center"></td><td align="center"></td></tr><tr><td>Mysql_password</td><td>String</td><td>nutanix/4u</td><td align="center">X</td><td align="center"></td></tr><tr><td>Database_name</td><td>String</td><td>homestead</td><td align="center"></td><td align="center"></td></tr></tbody></table><p><img loading="lazy" src="/cicd_lab/assets/images/5-14872adaf54aa620a4b03e00d33e774c.png" width="649" height="616" class="img_ev3q"></p></li><li><p>Click <strong>Save</strong>.</p></li></ol><h1>Adding a Downloadable Image</h1><p>VMs in AHV can be deployed based on a disk image. With Calm, you can
select a Downloadable Image via a URI. During the application
deployment, Prism Central will automatically download and create the
image specified. If an image with the same URI already exists on the
cluster, it will skip the download and use the local image instead.</p><ol><li><p>From the top toolbar, click <strong>Configuration &gt; Downloadable Image Configuration</strong> &gt; <code>+</code> sign and fill the following:
out the following fields:</p><ul><li><strong>Package Name</strong> - CentOS_7<!-- -->_<!-- -->Cloud</li><li><strong>Description</strong> - CentOS 7 Cloud Image</li><li><strong>Image Name</strong> - CentOS_7<!-- -->_<!-- -->Cloud</li><li><strong>Image Type</strong> - Disk Image</li><li><strong>Architecture</strong> - X86_64</li><li><strong>Source URI</strong> - <code>http://download.nutanix.com/calm/CentOS-7-x86_64-GenericCloud.qcow2</code></li><li><strong>Product Name</strong> - CentOS</li><li><strong>Product Version</strong> - 7</li></ul><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>This Generic Cloud image is the same that is used for the majority of the Nutanix Pre-Seeded Application Blueprints.</p></div></div><p><img loading="lazy" src="/cicd_lab/assets/images/6-3d40188419f68d2e6a038bb3ec668b8c.png" width="314" height="614" class="img_ev3q"></p></li><li><p>Click <strong>Save</strong>, and then <strong>Back</strong>.</p></li></ol><h1>Creating Services</h1><p>Services are the virtual machine instances, existing machines or
bare-metal machines, that you can provision and configure by using
Nutanix Calm.</p><p>In this exercise you will create the database, webserver, and load
balancer services that comprise your application.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="creating-the-database-service">Creating the Database Service<a href="#creating-the-database-service" class="hash-link" aria-label="Direct link to Creating the Database Service" title="Direct link to Creating the Database Service">​</a></h2><ol><li><p>In <strong>Application Overview <!-- -->&gt;<!-- --> Service</strong>, click on <code>+</code> sign  to add a new Service.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>The pane within the Blueprint Editor used to create and manage
Blueprint Layers is called the Application Overview. Blueprint
Layers consist of Services, Actions, and Application Profiles.</p><p>By default, the Application Overview is located in the lower
left-hand corner of the Blueprint Editor and is used to create and
manage Blueprint layers such as Services, Application Profiles, and Actions.</p></div></div><p><img loading="lazy" src="data:image/png;base64,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" width="247" height="261" class="img_ev3q"></p><p>Note <strong>Service1</strong> appears in the <strong>Workspace</strong> and the <strong>Configuration Pane</strong> reflects the configuration of the selected Service.</p></li><li><p>Fill out the following fields:</p><ul><li><strong>Service Name</strong> - MySQL</li><li><strong>Name</strong> - MySQLAHV</li></ul><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>This defines the name of the substrate within Calm. Names can only contain alphanumeric characters, spaces, and underscores.</p></div></div><ul><li><strong>Cloud</strong> - Nutanix</li><li><strong>OS</strong> - Linux</li><li><strong>VM Name</strong> - <code>@@{User_initials}@@-MYSQL-@@{calm_array_index}@@-@@{calm_time}@@</code></li></ul><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>This will use the Runtime <strong>User_initials</strong> variable you previously provided to prepend the VM name with your initials. It will also use
built-in macros to provide the array index (for scale out services) and a time stamp.</p></div></div><ul><li><p><strong>Image</strong> - CentOS_7_Cloud</p></li><li><p><strong>Device Type</strong> - Disk</p></li><li><p><strong>Device Bus</strong> - SCSI</p></li><li><p>Select <strong>Bootable</strong></p></li><li><p><strong>vCPUs</strong> - 2</p></li><li><p><strong>Cores per vCPU</strong> - 1</p></li><li><p><strong>Memory (GiB)</strong> - 4</p></li><li><p>Select <strong>Guest Customization</strong></p><ul><li><p><strong>Type</strong> - Cloud-init</p></li><li><p><strong>Script</strong> -</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">#cloud-config</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">users:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - name: centos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ssh-authorized-keys:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - @@</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">CENTOS.public_key</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">@@</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sudo: </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;ALL=(ALL) NOPASSWD:ALL&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>When using an SSH Private Key Credential, Calm is able to
decode that private key into the matching public key, and
makes the decoded value accessable via the
<code>@@{Credential_Name.public_key}@@</code> macro. Cloud-Init is then
leveraged to populate the SSH public key value as an
authorized key, allowing for the corresponding private key
to be used to authenticate to the host.</p></div></div></li></ul></li><li><p>Select <code>+</code> sign under <strong>Network Adapters (NICs)</strong> and add </p><ul><li><strong>NIC 1</strong> - Primary</li><li><strong>Credential</strong> - CENTOS</li></ul></li></ul></li><li><p>Click <strong>Save</strong>.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>If errors or warnings are presented after saving the blueprint, hover over the icon in the top toolbar to see a list of issues.
Resolve any issues and <strong>Save</strong> the blueprint again.</p><p><img loading="lazy" src="/cicd_lab/assets/images/8-b7bdf9543150c6c95796c96b6b406a46.png" width="597" height="154" class="img_ev3q"></p></div></div><p>Now that you have completed the deployment details for the VM associated with the service, the next step is to tell Calm how the
application will be installed on the VM.</p></li><li><p>With the <strong>MySQL</strong> service icon selected in the Workspace pane,¥scroll to the top of the <strong>Configuration Panel</strong>, and select the
<strong>Package</strong> tab.</p><p>The Package is the configuration and application(s) installed on theService, and is typically accomplished by executing a script on the
Service VM.</p></li><li><p>Specify <strong>MySQL_PACKAGE</strong> as the <strong>Package Name</strong> and click <strong>Configure install</strong>.</p><ul><li><strong>Package Name</strong> - MYSQL_PACKAGE</li></ul><p><img loading="lazy" src="/cicd_lab/assets/images/9-c0abfd932db0ba5cf9f6c2d19cf0a4a0.png" width="332" height="247" class="img_ev3q"></p><p>Note the <strong>Package install</strong> field that appears on the MySQL service in the Workspace pane.</p></li><li><p>Select <strong>+ Task</strong>, and fill out the following fields in the <strong>Configuration Panel</strong> to define the script that Calm will remotely
execute on the MySQL Service VM:</p><ul><li><p><strong>Task Name</strong> - Install_sql</p></li><li><p><strong>Type</strong> - Execute</p></li><li><p><strong>Script Type</strong> - Shell</p></li><li><p><strong>Credential</strong> - CENTOS</p></li><li><p><strong>Script</strong> -</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token shebang important">#!/bin/bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">set</span><span class="token plain"> -ex</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> yum </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> -y </span><span class="token string" style="color:#e3116c">&quot;http://repo.mysql.com/mysql-community-release-el7-5.noarch.rpm&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> yum update -y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> setenforce </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sed</span><span class="token plain"> -i </span><span class="token string" style="color:#e3116c">&#x27;s/enforcing/disabled/g&#x27;</span><span class="token plain"> /etc/selinux/config /etc/selinux/config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl stop firewalld </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl disable firewalld </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> yum </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> -y mysql-community-server.x86_64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> /bin/systemctl start mysqld</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> /bin/systemctl </span><span class="token builtin class-name">enable</span><span class="token plain"> mysqld</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#Mysql secure installation</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql -u root</span><span class="token operator" style="color:#393A34">&lt;&lt;-</span><span class="token string" style="color:#e3116c">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">UPDATE mysql.user SET Password=PASSWORD(&#x27;@@{Mysql_password}@@&#x27;) WHERE User=&#x27;@@{Mysql_user}@@&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">DELETE FROM mysql.user WHERE User=&#x27;@@{Mysql_user}@@&#x27; AND Host NOT IN (&#x27;localhost&#x27;, &#x27;127.0.0.1&#x27;, &#x27;::1&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">DELETE FROM mysql.user WHERE User=&#x27;&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">DELETE FROM mysql.db WHERE Db=&#x27;test&#x27; OR Db=&#x27;test\_%&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">FLUSH PRIVILEGES;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql -u @@</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">Mysql_user</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">@@ -p@@</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">Mysql_password</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">@@ </span><span class="token operator" style="color:#393A34">&lt;&lt;-</span><span class="token string" style="color:#e3116c">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">CREATE DATABASE @@{Database_name}@@;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">GRANT ALL PRIVILEGES ON homestead.* TO &#x27;@@{Database_name}@@&#x27;@&#x27;%&#x27; identified by &#x27;secret&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">FLUSH PRIVILEGES;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><p><img loading="lazy" src="/cicd_lab/assets/images/10-0009d070e86bf4cda272436a44a8b16e.png" width="623" height="601" class="img_ev3q"></p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>You can click the <strong>Pop Out</strong> icon on the script field for a larger window to view/edit scripts.</p></div></div><p>Reviewing the script you can see the package will install MySQL, configure the credentials and create a database based on the
variables specified earlier in the exercise.</p></li><li><p>Select the <strong>MySQL</strong> service icon in the Workspace pane again,</p></li><li><p>Select the <strong>Package</strong> tab in the <strong>Configuration Panel</strong>.</p></li><li><p>Click <strong>Configure uninstall</strong>.</p></li><li><p>Select <strong>+ Task</strong>, and fill out the following fields in the <strong>Configuration Panel</strong>:</p><ul><li><p><strong>Task Name</strong> - Uninstall_sql</p></li><li><p><strong>Type</strong> - Execute</p></li><li><p><strong>Script Type</strong> - Shell</p></li><li><p><strong>Credential</strong> - CENTOS</p></li><li><p><strong>Script</strong> -</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token shebang important">#!/bin/bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Goodbye!&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><p><img loading="lazy" src="/cicd_lab/assets/images/11-658a401be8ae4de5d16485f9b25b778e.png" width="617" height="538" class="img_ev3q"></p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>The uninstall script can be used for removing packages, updatingnetwork services like DHCP and DNS, removing entries from Active
Directory, etc. It is not being used for this simple example.</p></div></div></li><li><p>Click <strong>Save</strong>. You will be prompted with specific errors if there are validation issues such as missing fields or unacceptable
characters.</p></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="creating-the-web-server-service">Creating the Web Server Service<a href="#creating-the-web-server-service" class="hash-link" aria-label="Direct link to Creating the Web Server Service" title="Direct link to Creating the Web Server Service">​</a></h2><p>You will now follow similar steps to define a web server service.</p><ol><li><p>In <strong>Application Overview &gt; Services</strong>, add an additional service.</p></li><li><p>Select the new service and fill out the following <strong>VM</strong> fields in the <strong>Configuration Panel</strong>:</p><ul><li><p><strong>Service Name</strong> - WebServer</p></li><li><p><strong>Name</strong> - WebServerAHV</p></li><li><p><strong>Cloud</strong> - Nutanix</p></li><li><p><strong>OS</strong> - Linux</p></li><li><p><strong>VM Name</strong> -
@@{User_initials}@@-WebServer-@@{calm_array_index}@@</p></li><li><p><strong>Image</strong> - CentOS_7<!-- -->_<!-- -->Cloud</p></li><li><p><strong>Device Type</strong> - Disk</p></li><li><p><strong>Device Bus</strong> - SCSI</p></li><li><p>Select <strong>Bootable</strong></p></li><li><p><strong>vCPUs</strong> - 2</p></li><li><p><strong>Cores per vCPU</strong> - 1</p></li><li><p><strong>Memory (GiB)</strong> - 4</p></li><li><p>Select <strong>Guest Customization</strong></p><ul><li><p><strong>Type</strong> - Cloud-init</p></li><li><p><strong>Script</strong> -</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">#cloud-config</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">users:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - name: centos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ssh-authorized-keys:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - @@</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">CENTOS.public_key</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">@@</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sudo: </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;ALL=(ALL) NOPASSWD:ALL&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></li><li><p>Select <code>+</code> sign under<strong>Network Adapters (NICs)</strong></p><ul><li><strong>NIC 1</strong> - Primary</li><li><strong>Credential</strong> - CENTOS</li></ul></li></ul></li><li><p>Select the <strong>Package</strong> tab.</p></li><li><p>Specify a <strong>Package Name</strong> and click <strong>Configure install</strong>.</p><ul><li><strong>Package Name</strong> - WebServer_PACKAGE</li></ul></li><li><p>Select <strong>+ Task</strong>, and fill out the following fields in the
<strong>Configuration Panel</strong>:</p><ul><li><p><strong>Name Task</strong> - Install_WebServer</p></li><li><p><strong>Type</strong> - Execute</p></li><li><p><strong>Script Type</strong> - Shell</p></li><li><p><strong>Credential</strong> - CENTOS</p></li><li><p><strong>Script</strong> -</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token shebang important">#!/bin/bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">set</span><span class="token plain"> -ex</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> yum update -y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> yum -y </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> epel-release</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> setenforce </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sed</span><span class="token plain"> -i </span><span class="token string" style="color:#e3116c">&#x27;s/enforcing/disabled/g&#x27;</span><span class="token plain"> /etc/selinux/config /etc/selinux/config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl stop firewalld </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl disable firewalld </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">rpm</span><span class="token plain"> -Uvh https://mirror.webtatic.com/yum/el7/webtatic-release.rpm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> yum update -y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> yum </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> -y nginx php56w-fpm php56w-cli php56w-mcrypt php56w-mysql php56w-mbstring php56w-dom </span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">unzip</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> -p /var/www/laravel</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;server {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"> listen 80 default_server;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"> listen [::]:80 default_server ipv6only=on;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">root /var/www/laravel/public/;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"> index index.php index.html index.htm;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">location / {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"> try_files \</span><span class="token string variable" style="color:#36acaa">$uri</span><span class="token string" style="color:#e3116c"> \</span><span class="token string variable" style="color:#36acaa">$uri</span><span class="token string" style="color:#e3116c">/ /index.php?\</span><span class="token string variable" style="color:#36acaa">$query_string</span><span class="token string" style="color:#e3116c">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"> }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"> # pass the PHP scripts to FastCGI server listening on /var/run/php5-fpm.sock</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"> location ~ \.php$ {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"> try_files \</span><span class="token string variable" style="color:#36acaa">$uri</span><span class="token string" style="color:#e3116c"> /index.php =404;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"> fastcgi_split_path_info ^(.+\.php)(/.+)\$;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"> fastcgi_pass 127.0.0.1:9000;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"> fastcgi_index index.php;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"> fastcgi_param SCRIPT_FILENAME \</span><span class="token string variable" style="color:#36acaa">$document_root</span><span class="token string" style="color:#e3116c">\</span><span class="token string variable" style="color:#36acaa">$fastcgi_script_name</span><span class="token string" style="color:#e3116c">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"> include fastcgi_params;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"> }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">tee</span><span class="token plain"> /etc/nginx/conf.d/laravel.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sed</span><span class="token plain"> -i </span><span class="token string" style="color:#e3116c">&#x27;s/80 default_server/80/g&#x27;</span><span class="token plain"> /etc/nginx/nginx.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable function" style="color:#d73a49">grep</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable string" style="color:#e3116c">&quot;cgi.fix_pathinfo&quot;</span><span class="token variable" style="color:#36acaa"> /etc/php.ini</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sed</span><span class="token plain"> -i </span><span class="token string" style="color:#e3116c">&#x27;s/cgi.fix_pathinfo=1/cgi.fix_pathinfo=0/&#x27;</span><span class="token plain"> /etc/php.ini</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sed</span><span class="token plain"> -i </span><span class="token string" style="color:#e3116c">&#x27;s/;cgi.fix_pathinfo=1/cgi.fix_pathinfo=0/&#x27;</span><span class="token plain"> /etc/php.ini</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">fi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl </span><span class="token builtin class-name">enable</span><span class="token plain"> php-fpm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl </span><span class="token builtin class-name">enable</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl restart php-fpm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl restart nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain"> -e /usr/local/bin/composer </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -sS https://getcomposer.org/installer </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> php</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mv</span><span class="token plain"> composer.phar /usr/local/bin/composer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">chmod</span><span class="token plain"> +x /usr/local/bin/composer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">fi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/ideadevice/quickstart-basic.git /var/www/laravel</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sed</span><span class="token plain"> -i </span><span class="token string" style="color:#e3116c">&#x27;s/DB_HOST=.*/DB_HOST=@@{MySQL.address}@@/&#x27;</span><span class="token plain"> /var/www/laravel/.env</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">su</span><span class="token plain"> - -c </span><span class="token string" style="color:#e3116c">&quot;cd /var/www/laravel; composer install&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;@@{calm_array_index}@@&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">su</span><span class="token plain"> - -c </span><span class="token string" style="color:#e3116c">&quot;cd /var/www/laravel; php artisan migrate&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">fi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">chown</span><span class="token plain"> -R nginx:nginx /var/www/laravel</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">chmod</span><span class="token plain"> -R </span><span class="token number" style="color:#36acaa">777</span><span class="token plain"> /var/www/laravel/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl restart nginx</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><p>This script installs PHP and Nginx to create a web server, and then a Laravel based web application. It then configures the web
application settings, including updating the <strong>DB_HOST</strong> with the  MySQL IP address, accessed via the <code>@@{MySQL.address}@@</code> macro.</p></li><li><p>Select the <strong>Package</strong> tab and click <strong>Configure uninstall</strong>.</p></li><li><p>Select <strong>+ Task</strong>, and fill out the following fields in the <strong>Configuration Panel</strong>:</p><ul><li><p><strong>Name Task</strong> - Uninstall_WebServer</p></li><li><p><strong>Type</strong> - Execute</p></li><li><p><strong>Script Type</strong> - Shell</p></li><li><p><strong>Credential</strong> - CENTOS</p></li><li><p><strong>Script</strong> -</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token shebang important">#!/bin/bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">set</span><span class="token plain"> -ex</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">rm</span><span class="token plain"> -rf /var/www/laravel</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> yum erase -y nginx</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><p>For many applications it is common to need to scale out a givenservice, such as the web tier in order to handle more concurrent
users. Calm makes it simple to turn deploy an array containing multiple copies of a given service.</p></li><li><p>With the <strong>WebServer</strong> service icon selected in the Workspace pane,scroll to the top of the <strong>Configuration Panel</strong>, and select the
<strong>Service</strong> tab.</p></li><li><p>Under <strong>Deployment Config &gt; Number of Replicas</strong>, increase the <strong>Min</strong> value from 1 to 2 and the <strong>Max</strong> value from 1 to 4.</p><p><img loading="lazy" src="/cicd_lab/assets/images/12-b38d2b065bc17e8eff52f28f6fbfbc5a.png" width="538" height="314" class="img_ev3q"></p><p>This change will provision a minimum of 2 WebServer VMs for eachdeployment of the application, and allow the array to grow up to a
total of 4 WebServer VMs.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>Scaling an application in and out will require additional scripting so that the application understands how to leverage the additionalVMs.</p></div></div></li><li><p>Click <strong>Save</strong>.</p></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="creating-the-load-balancer-service">Creating the Load Balancer Service<a href="#creating-the-load-balancer-service" class="hash-link" aria-label="Direct link to Creating the Load Balancer Service" title="Direct link to Creating the Load Balancer Service">​</a></h2><p>To take advantage of a scale out web tier, your application needs to be able to load balance connections across multiple web server VMs. HAProxy is a free, open source TCP/HTTP load balancer used to distribute workloads across multiple servers. It can be used anywhere from small,
simple deployments to large web-scale environments such as GitHub, Instagram, and Twitter.</p><ol><li><p>In <strong>Application Overview &gt; Services</strong>, add an additional service.</p></li><li><p>Select the new service and fill out the following <strong>VM</strong> fields in
the <strong>Configuration Panel</strong>:</p><ul><li><p><strong>Service Name</strong> - HAProxy</p></li><li><p><strong>Name</strong> - HAProxyAHV</p></li><li><p><strong>Cloud</strong> - Nutanix</p></li><li><p><strong>OS</strong> - Linux</p></li><li><p><strong>VM Name</strong> - @@{User_initials}@@-HAProxy-@@{calm_array_index}@@</p></li><li><p><strong>Image</strong> - CentOS_7<!-- -->_<!-- -->Cloud</p></li><li><p><strong>Device Type</strong> - Disk</p></li><li><p><strong>Device Bus</strong> - SCSI</p></li><li><p>Select <strong>Bootable</strong></p></li><li><p><strong>vCPUs</strong> - 2</p></li><li><p><strong>Cores per vCPU</strong> - 1</p></li><li><p><strong>Memory (GiB)</strong> - 4</p></li><li><p>Select <strong>Guest Customization</strong></p><ul><li><p><strong>Type</strong> - Cloud-init</p></li><li><p><strong>Script</strong> -</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">#cloud-config</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">users:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - name: centos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ssh-authorized-keys:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - @@</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">CENTOS.public_key</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">@@</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sudo: </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;ALL=(ALL) NOPASSWD:ALL&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></li><li><p>Select <code>+</code> sign under <strong>Network Adapters (NICs)</strong></p><ul><li><strong>NIC 1</strong> - Primary</li><li><strong>Credential</strong> - CENTOS</li></ul></li></ul></li><li><p>Select the <strong>Package</strong> tab.</p></li><li><p>Specify a <strong>Package Name</strong> and click <strong>Configure install</strong>.</p><ul><li><strong>Package Name</strong> - HAProxy_PACKAGE</li></ul></li><li><p>Select <strong>+ Task</strong>, and fill out the following fields in the <strong>Configuration Panel</strong>:</p><ul><li><p><strong>Name Task</strong> - Install_HAProxy</p></li><li><p><strong>Type</strong> - Execute</p></li><li><p><strong>Script Type</strong> - Shell</p></li><li><p><strong>Credential</strong> - CENTOS</p></li><li><p><strong>Script</strong> -</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token shebang important">#!/bin/bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">set</span><span class="token plain"> -ex</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> yum update -y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> yum </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> -y haproxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> setenforce </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sed</span><span class="token plain"> -i </span><span class="token string" style="color:#e3116c">&#x27;s/enforcing/disabled/g&#x27;</span><span class="token plain"> /etc/selinux/config /etc/selinux/config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl stop firewalld </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl disable firewalld </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;global</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"> log 127.0.0.1 local0</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"> log 127.0.0.1 local1 notice</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"> maxconn 4096</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"> quiet</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"> user haproxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"> group haproxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">defaults</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"> log global</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"> mode http</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"> retries 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"> timeout client 50s</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"> timeout connect 5s</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"> timeout server 50s</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"> option dontlognull</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"> option httplog</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"> option redispatch</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"> balance roundrobin</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"># Set up application listeners here.</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">listen admin</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"> bind 127.0.0.1:22002</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"> mode http</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"> stats uri /</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">frontend http</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"> maxconn 2000</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"> bind 0.0.0.0:80</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"> default_backend servers-http</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">backend servers-http&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">tee</span><span class="token plain"> /etc/haproxy/haproxy.cfg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">hosts</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable builtin class-name" style="color:#36acaa">echo</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable string" style="color:#e3116c">&quot;@@{WebServer.address}@@&quot;</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable operator" style="color:#393A34">|</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable function" style="color:#d73a49">tr</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable string" style="color:#e3116c">&quot;,&quot;</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable string" style="color:#e3116c">&quot;</span><span class="token variable string entity" style="color:#36acaa">\n</span><span class="token variable string" style="color:#e3116c">&quot;</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">port</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token for-or-select variable" style="color:#36acaa">host</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$hosts</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; server host-</span><span class="token string variable" style="color:#36acaa">${host}</span><span class="token string" style="color:#e3116c"> </span><span class="token string variable" style="color:#36acaa">${host}</span><span class="token string" style="color:#e3116c">:</span><span class="token string variable" style="color:#36acaa">${port}</span><span class="token string" style="color:#e3116c"> weight 1 maxconn 100 check&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">tee</span><span class="token plain"> -a /etc/haproxy/haproxy.cfg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">done</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl daemon-reload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl </span><span class="token builtin class-name">enable</span><span class="token plain"> haproxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl restart haproxy</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>The use of the @@{WebServer.address}@@ macro in the scriptabove. The macro returns a comma delimited list of all IPs of the
VMs within that service. The script then uses the <a href="https://www.geeksforgeeks.org/tr-command-unixlinux-examples/" target="_blank" rel="noopener noreferrer">tr</a>
command to replace commas with carriage returns. The result is an array, <strong>\$hosts</strong>, containing strings of all WebServer IP
addresses. Those addresses are then each added to the <strong>HAProxy</strong> configuration file.</p></div></div></li><li><p>Select the <strong>Package</strong> tab and click <strong>Configure uninstall</strong>.</p></li><li><p>Select <strong>+ Task</strong>, and fill out the following fields in the <strong>Configuration Panel</strong>:</p><ul><li><p><strong>Name Task</strong> - Uninstall_HAProxy</p></li><li><p><strong>Type</strong> - Execute</p></li><li><p><strong>Script Type</strong> - Shell</p></li><li><p><strong>Credential</strong> - CENTOS</p></li><li><p><strong>Script</strong> -</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token shebang important">#!/bin/bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">set</span><span class="token plain"> -ex</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yum -y erase haproxy</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></li><li><p>Click <strong>Save</strong>.</p></li></ol><h1>Adding Dependencies</h1><p>As our application will require the database to be running before the web server starts, our Blueprint requires a dependency to enforce this
ordering. There are a couple of ways to do this, one of which you&#x27;ve already done without likely realizing it.</p><ol><li><p>In the <strong>Application Overview <!-- -->&gt;<!-- --> Application Profile</strong> section, expand the <strong>Default</strong> Application Profile and click the <strong>Create</strong> Action.</p><p><img loading="lazy" src="/cicd_lab/assets/images/13-76315be69e36f74c3ddc3a00e244832e.png" width="1132" height="522" class="img_ev3q"></p><p>Take note of the <strong>Orange Orchestration Edge</strong> going from the <strong>MySQL Start</strong> task to the <strong>WebServer Package Install</strong> task. This
edge was automatically created by Calm due to the <code>@@{MySQL.address}@@</code> macro reference in the <strong>WebServer Package Install</strong> task. Since the system needs to know the IP Address of the
MySQL service prior to being able to proceed with the WebServer Install task, Calm intelligently creates the orchestration edge for you. This requires the MySQL service to be started prior to moving on to the WebServer Install task.</p></li><li><p>Return to the <strong>HAProxy Package Install</strong> task, why are orchestration edges automatically created between the WebServer and HAProxy services?</p></li><li><p>Next, select the <strong>Stop</strong> Profile Action.</p><p>Note that lack of orchestration edges between services when stopping an application. Why might issuing shutdown commands to all service within the application simultaneously create an issue?</p></li><li><p>Click on each Profile Action to take note of the current presence (or lack thereof) of the orchestration edges.</p><p><img loading="lazy" src="/cicd_lab/assets/images/14-fb93c96cb5258b31272d53e680ab1a6f.png" width="1072" height="368" class="img_ev3q"></p><p>To resolve this, you\&#x27;ll manually define a dependencies between services.</p></li><li><p>Select the <strong>WebServer</strong> Service and click the <strong>Create Dependency</strong> icon that appears above the Service icon, and then click on the <strong>MySQL</strong> service.</p><p><img loading="lazy" src="/cicd_lab/assets/images/15-c0f128a261e05adecb65420fb9f26e98.png" width="253" height="290" class="img_ev3q"></p></li><li><p>This represents that the <strong>WebServer</strong> service depends upon the <strong>MySQL</strong> service, meaning the <strong>MySQL</strong> service will start before, and stop after, the <strong>WebServer</strong> service.</p></li><li><p>Now create a dependency for the <strong>HAProxy</strong> service to depend on the <strong>WebServer</strong> service.</p></li><li><p>Click <strong>Save</strong>.</p></li><li><p>Re-visit the Profile Actions and confirm the edges now properly reflect the dependencies between the services, as shown below:</p><p><img loading="lazy" src="/cicd_lab/assets/images/16-f796ebf76b8ce88305804bef3b865de6.png" width="1066" height="371" class="img_ev3q"></p><p>Drawing the white dependency arrows will cause Calm to create orchestration edges for all <strong>System Defined Profile Actions</strong> (Create, Start, Restart, Stop, Delete, and Soft Delete).</p></li></ol><h1>Launching and Managing the Application</h1><ol><li><p>From the upper toolbar in the Blueprint Editor, click <strong>Launch</strong>.</p></li><li><p>Specify a unique <strong>Application Name</strong> (e.g. <em>Initials</em>-CalmLinuxIntro1) and your <strong>User_initials</strong> Runtime variable value for VM naming.</p></li><li><p>Click <strong>Create</strong>.</p><p>The <strong>Audit</strong> tab can be used to monitor the deployment of the application.</p><p>Why don&#x27;t all of the CentOS based services deploy at the same time following the download of the disk image?</p></li><li><p>Once the application reaches a <strong>Running</strong> status, navigate to the <strong>Services</strong> tab and select the <strong>HAProxy</strong> service to determine the IP address of your load balancer.</p></li><li><p>In a new browser tab or window, navigate to <code>http://&lt;HAProxy-IP&gt;</code>, and verify your Task Manager application is functioning.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>You can also click the link in the Description of the Application.</p></div></div><p><img loading="lazy" src="/cicd_lab/assets/images/17-ef83b02be64dbadf2c761228b82ff3ad.png" width="483" height="444" class="img_ev3q"></p></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="takeaways">Takeaways<a href="#takeaways" class="hash-link" aria-label="Direct link to Takeaways" title="Direct link to Takeaways">​</a></h2><p>What are the key things you should know about <strong>Nutanix Calm</strong>?</p><ul><li>Nutanix Calm, as a native component of Prism, is built on and carries forward the benefits of the platform. The simplicity
provided by Acropolis lets Calm focus on applications, rather than trying to mask the complexity of the underlying infrastructure management.</li><li>Calm blueprints are easy to use. In 60 minutes you went from nothing to a full infrastructure stack deployment. Because Calm uses
standard tools for configuration - bash, PowerShell, Python, etc. - there&#x27;s no new language to learn and you can immediately apply skills and code you already have.</li><li>While not as visually impressive, even single VM blueprints can have a massive effect on customers. One bank in India is using Calm for
single-VM deployments, reducing the time to deploy these applications from 3 days to 2 hours. Remember that many customers
have little or no automation today (or the automation they have is complex/hard to understand thus limiting it&#x27;s adoption). This means
that Calm can help them right now, today, instantly.</li><li><strong>Multi-Cloud Application Automation and Lifecycle Management</strong> may sound scary. The &#x27;future&#x27; sounds amazing, but many operators can&#x27;t see the path to there. Listen to what the customer is struggling with today (backups require specialized skills, VM
deployment takes a long time, upgrades are hard) and speak to how Calm can help with that; jumping right to the multi-cloud automation
story pushes Calm from a <strong>I need this right now</strong> to a <strong>well let&#x27;s</strong> evaluate this later on, once things have quieted down (and things never truly quiet down).</li><li>The Blueprint Editor provides a simple UI for modeling potentiallycomplex applications.</li><li>Blueprints are tied to Projects which can be used to enforce quotas and role based access control.</li><li>Having a Blueprint install and configure binaries means no longer creating specific images for individual applications. Instead the
application can be modified through changes to the Blueprint or installation script, both of which can be stored in source code repositories.</li><li>Variables allow another dimension of customizing an application without having to edit the underlying Blueprint.</li><li>There are multiple ways of authenticating to a VM (keys or passwords), which is dependent upon the source image.</li><li>Application status can be monitored in real time.</li><li>Applications typically span across multiple VMs, each responsible for different services. Calm is capable of automated and orchestrating full applications.</li><li>Dependencies between services can be easily modeled in the Blueprint Editor.</li><li>Users can quickly provision entire application stacks for production or testing for repeatable results without time lost to manual configuration.</li><li>Interested in using Calm for more app lifecycle operations? Check out the <a href="/cicd_lab/calm_linux_track/calm_day2_linux/">Calm Day2</a> document</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/mat0606/cicd_lab/edit/main/docs/calm_linux_track/calm_linux_app/calm_linux_app.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#creating-the-database-service" class="table-of-contents__link toc-highlight">Creating the Database Service</a></li><li><a href="#creating-the-web-server-service" class="table-of-contents__link toc-highlight">Creating the Web Server Service</a></li><li><a href="#creating-the-load-balancer-service" class="table-of-contents__link toc-highlight">Creating the Load Balancer Service</a></li><li><a href="#takeaways" class="table-of-contents__link toc-highlight">Takeaways</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/cicd_lab/assets/js/runtime~main.4c4a6286.js"></script>
<script src="/cicd_lab/assets/js/main.d3258577.js"></script>
</body>
</html>