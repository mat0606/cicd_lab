"use strict";(self.webpackChunkcicd_lab=self.webpackChunkcicd_lab||[]).push([[2018],{3905:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>g});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=n.createContext({}),c=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):s(s({},t),e)),r},p=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),u=c(r),d=a,g=u["".concat(l,".").concat(d)]||u[d]||m[d]||i;return r?n.createElement(g,s(s({ref:t},p),{},{components:r})):n.createElement(g,s({ref:t},p))}));function g(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=r.length,s=new Array(i);s[0]=d;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o[u]="string"==typeof e?e:a,s[1]=o;for(var c=2;c<i;c++)s[c]=r[c];return n.createElement.apply(null,s)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},5162:(e,t,r)=>{r(7294)},5488:(e,t,r)=>{r(7294),r(2389)},914:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>m,frontMatter:()=>i,metadata:()=>o,toc:()=>c});var n=r(7462),a=(r(7294),r(3905));r(5488),r(5162);const i={title:"Part 1: Register Nexus OSS with NKE cluster"},s="Part 1: Register Nexus OSS with NKE cluster",o={unversionedId:"nexus_nke/nexus_nke",id:"nexus_nke/nexus_nke",title:"Part 1: Register Nexus OSS with NKE cluster",description:"NKE had defined the following requirements for the image registry such as JFrog Artifactory or Nexus OSS.",source:"@site/docs/nexus_nke/nexus_nke.mdx",sourceDirName:"nexus_nke",slug:"/nexus_nke/",permalink:"/cicd_lab/nexus_nke/",draft:!1,editUrl:"https://github.com/mat0606/cicd-lab/edit/main/docs/nexus_nke/nexus_nke.mdx",tags:[],version:"current",frontMatter:{title:"Part 1: Register Nexus OSS with NKE cluster"},sidebar:"tutorialSidebar",previous:{title:"Create Namespace in NKE cluster",permalink:"/cicd_lab/nexus_nke/create_ns"}},l={},c=[],p={toc:c},u="wrapper";function m(e){let{components:t,...i}=e;return(0,a.kt)(u,(0,n.Z)({},p,i,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"part-1-register-nexus-oss-with-nke-cluster"},"Part 1: Register Nexus OSS with NKE cluster"),(0,a.kt)("p",null,"NKE had defined the following requirements for the image registry such as JFrog Artifactory or Nexus OSS."),(0,a.kt)("p",null,"\u2022\tThe image registry must be configured to use HTTPS.\n\u2022\tThe certificate generation for the private image registry must contains Subject Alternate Name"),(0,a.kt)("p",null,"The Nexus OSS HTTPS blueprint would provision a Nexus OSS Repository which meet these requirements"),(0,a.kt)("h1",{id:"retrieve-the-vm-name-for-nexus-image-registry"},"Retrieve the VM name for Nexus Image Registry"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Click on Application icon.  Filter by Nexus.  Drill into your assigned image registry"),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("img",{src:r(8612).Z,width:"903",height:"450"}))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Click on ",(0,a.kt)("strong",{parentName:"p"},"Services"),".  Click on ",(0,a.kt)("strong",{parentName:"p"},"Nexus")),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("img",{src:r(3917).Z,width:"834",height:"363"}))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"On the right side of the screen, note down the VM name for Nexus server."),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("img",{src:r(51).Z,width:"453",height:"523"})))),(0,a.kt)("h1",{id:"create-secret-to-register-docker-server-and-credential"},"Create Secret to register Docker server and credential"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Change the window to the putty tab for Centos VM in the \u201cCreate K8S cluster\u201d Calm application.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Change this command according to your assigned Nexus VM and Kubernetes namespace"),(0,a.kt)("p",{parentName:"li"},"a.  docker-server\nb.  namespace"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"kubectl create secret docker-registry regcred --docker-server=https://n230305-013447.ntnxlab.local:18090 --docker-username=mat0606 --docker-password=xxxxx --docker-email=mat0606@hotmail.com -n devops18\n")))),(0,a.kt)("h1",{id:"setup-nexus-name-resolution-in-prism-central"},"Setup Nexus Name Resolution in Prism Central"),(0,a.kt)("p",null,"NKE needs to trust the Nexus OSS certificate"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Putty into Prism Central using the credential provided by the trainer.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Change the highlighted according to your environment."),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"10.38.218.93 n230305-013447.ntnxlab.local n230305-013447")),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-bash"},'sudo vi /etc/hosts\n"10.38.218.93 n230305-013447.ntnxlab.local n230305-013447" \n\n ![](register_nexus_images/nexus_nke4.png)\n\n'))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Repeat for Prism Central Scale Out.  Request the 3 Prism Central IP address from the trainer."))))}m.isMDXComponent=!0},8612:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/nexus_nke1-6b18bea49e16ee5b06b5173622980721.png"},3917:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/nexus_nke2-19f87c0042d355fa91055777e1555748.png"},51:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/nexus_nke3-ef7a983ef82fe60bda03aa5f7a8b2279.png"}}]);